# 검수항목 비교분석 결과

구조화중간성과_검수항목.md와 CSV 7종 설정 파일을 비교한 결과입니다.

## ✅ 구현 완료 항목

### G1 - 스키마 규칙 검사
- **G1-1**: 레이어별 도형타입 검사 → `1_table_check.csv` (GeometryType 컬럼)
- **G1-2**: 미정의 레이어 검사 → `1_table_check.csv` (정의된 테이블만 검사)
- **G1-3**: 테이블 스키마구조 검사 → `2_schema_check.csv` (DataType, Length 검사)
- **G1-4**: 필수컬럼 속성누락 검사 → `2_schema_check.csv` (NN=Y 필드 검사)

### G2 - 속성 입력 검사
- **G6**: 속성 코드리스트 검사 → `4_attribute_check.csv` (CodeList 규칙 다수)
- **G7**: 속성범위 검사-차도중심선 → `4_attribute_check.csv` (도로폭, 차로수 검사)
- **G8**: 속성범위 검사-하천중심선 → `4_attribute_check.csv` (명칭 필수)
- **G9**: 속성범위 검사-건물 → `4_attribute_check.csv` (층수, 높이 검사)
- **G10**: 속성범위 검사-등고선 → `4_attribute_check.csv` 
  - 25m 배수인 경우 계곡선(CTS001/CTS101) 검사: `CTRLN_HGT_25M_VALLEY` (IfMultipleOfThenCodeIn)
  - 25m 배수가 아닌 경우 주곡선(CTS002/CTS102) 검사: `CTRLN_HGT_NOT25M_MAIN` (IfNotMultipleOfThenCodeIn)
  - 간곡선/조곡선 사용 금지 검사: `CTRLN_SE_NO_INTERMEDIATE` (IfCodeThenNotIn)
- **G11**: 속성범위 검사-표고점 → `4_attribute_check.csv` 
  - 0.00 명시적 검사: `ATTR_ALPT_ZERO_EXPLICIT` (NumericEquals: 0.00)
- **G12**: 속성범위 검사-옹벽석축 → `4_attribute_check.csv` 
  - 옹벽상단(LTF005) 높이 > 0: `LNPGR_RETN_WALL_TOP_HGT_GT0` (IfCodeThenGreaterThanOrEqual)
  - 석축상단(LTF007) 높이 > 0: `LNPGR_STONE_WALL_TOP_HGT_GT0` (IfCodeThenGreaterThanOrEqual)
- **G13**: 속성범위 검사-명칭 → `4_attribute_check.csv` (KoreanTypo)
- **G15**: 속성범위 검사-행정경계 → `4_attribute_check.csv` 
  - 시도구역경계: `ADMD_CTPRVN_STDG_CD_FORMAT` (법정동코드 10자리), `ADMD_CTPRVN_FEAT_NM_NOTNULL` (명칭 필수)
  - 시군구구역경계: `ADMD_SGG_STDG_CD_FORMAT` (법정동코드 10자리), `ADMD_SGG_FEAT_NM_NOTNULL` (명칭 필수)
  - 읍면동구역경계: `ADMD_EMD_STDG_CD_FORMAT` (법정동코드 10자리), `ADMD_EMD_FEAT_NM_NOTNULL` (명칭 필수)
- **G16**: PNU 형식 검사 → `4_attribute_check.csv` (19자리)
- **G21**: NFID 형식 검사 → `4_attribute_check.csv` (Regex: 17자리 영숫자)
- **G63**: 메타데이터 검사 → `4_attribute_check.csv` 
  - 객체변동구분 필수: `METADATA_OBJFLTN_NOTNULL` (objfltn_se NotNull)
  - 수정측량방법 필수: `METADATA_MDSVYMT_NOTNULL` (mdsvymt_se NotNull)
  - 제작업체명 필수: `METADATA_FBCBZET_NOTNULL` (fbcbzet_nm NotNull)

### G4 - 포맷 검사
- **G62**: 성과포맷 검사 → `SimpleValidationService.cs` (ExecuteFileGdbIntegrityCheckAsync - FileGDB 포맷 확인)

### G3 - 관계성/위상 검사
- **G20**: NFID 중복 검사 → `2_schema_check.csv` (nf_id 필드 UK=Y, SchemaCheckProcessor에서 자동 검사)
- **G22**: 참조NFID 검사 → `2_schema_check.csv` (rfrnc_nfid 필드 FK=Y, SchemaCheckProcessor에서 자동 검사)
- **G23**: 중복객체 검사 → `3_geometry_check.csv` (객체중복=Y)
- **G24**: 중첩객체 검사(면형) → `3_geometry_check.csv` (객체간겹침=Y)
- **G25**: 중첩객체 검사(선형) → `3_geometry_check.csv` (객체간겹침=Y)
- **G27**: 경계침범 검사 → `5_relation_check.csv` (PolygonNotOverlap 등)
- **G28/G29**: 경계면 누락 검사 → `5_relation_check.csv` (PolygonMissingLine)
- **G45**: 경계침범 검사-건물->하천경계 → `5_relation_check.csv` (PolygonNotOverlap)
- **G46**: 경계침범 검사-건물->호수저수지/실폭하천 → `5_relation_check.csv` (PolygonNotOverlap)
- **G47**: 경계침범 검사-면형도로시설->호수저수지/실폭하천 → `5_relation_check.csv` (PolygonNotOverlap)
- **G35**: 중심선 누락 검사 → `5_relation_check.csv` (LineWithinPolygon)
- **G36**: 중심선 속성불일치 검사 → `5_relation_check.csv` (CenterlineAttributeMismatch)
  - 도로중심선: `도로중심선_속성불일치` (road_no|feat_nm|road_se 일치 검사)
  - 철도중심선: `철도중심선_속성불일치` (feat_nm|rlrwtyp_se 일치 검사)
  - 하천중심선: `하천중심선_속성불일치` (rvr_no|feat_nm|rvr_se 일치 검사)
- **G49**: 1포인트 객체 검사 → `3_geometry_check.csv` (최소정점개수)
- **G51**: 꼬임선형 객체 검사 → `3_geometry_check.csv` (자체꼬임=Y)
- **G53**: 미세면적 객체 검사 → `3_geometry_check.csv` (작은면적객체=Y, geometry_criteria.csv: 최소폴리곤면적=0.1)
- **G54**: 슬리버 객체 검사 → `3_geometry_check.csv` (슬리버=Y, geometry_criteria.csv: 슬리버형태지수=0.2)
- **G55**: 짧은선형 객체 검사 → `3_geometry_check.csv` (짧은객체=Y, geometry_criteria.csv: 최소선길이=0.01)
- **G56**: 폴리선 중복정점 검사 → `3_geometry_check.csv` (자기중첩=Y)
- **G30**: 교량하천명 일치 검사 → `5_relation_check.csv` 
  - 규칙: `교량하천명_일치검사` (BridgeRiverNameMatch)
  - 교량(PRC002-PRC005)과 하천중심선의 하천명 일치 검사
- **G52**: 도로중심선 꺽임 검사 → `5_relation_check.csv` 
  - 규칙: `도로중심선_꺽임검사` (RoadSharpBend)
  - 6도 이하로 꺽임 검사 (Tolerance: 6)
- **G57**: 등고선 교차 검사 → `5_relation_check.csv` 
  - 규칙: `등고선_교차검사` (ContourIntersection)
  - 다른 등고선과 교차 발생 검사
- **G58**: 등고선 꺽임 검사 → `5_relation_check.csv` 
  - 규칙: `등고선_꺽임검사` (ContourSharpBend)
  - 90도 미만으로 꺽임 검사 (Tolerance: 90)
- **G59**: 등고선 연결 검사 → `5_relation_check.csv` 
  - 규칙: `등고선_연결높이일치` (ConnectedLinesSameAttribute)
  - 연결된 등고선끼리 높이값(ctrln_hgt) 일치 검사 (Tolerance: 1m)
- **G26**: 경계불일치 검사 → `5_relation_check.csv`
  - 규칙: `도로시설_경계불일치_확장`, `도로시설_철도경계불일치` (PolygonWithinPolygon)
  - 교량/터널/입체교차부가 도로경계면/철도경계면에 포함되어야 함
- **G32**: 실폭하천 하천경계 누락 검사 → `5_relation_check.csv`
  - 규칙: `실폭하천_하천경계누락` (PolygonContainsLine)
  - 실폭하천에 하천경계가 포함되어야 함
- **G37**: 경지경계 내부존재 검사 → `5_relation_check.csv`
  - 규칙: `경지경계_내부객체검사` (PolygonContainsObjects)
  - 경지경계 내부에 포함되거나 겹치는 객체 검사
- **G38**: 홀겹침 객체 검사 → `5_relation_check.csv`
  - 규칙: `홀겹침_객체검사` (HoleDuplicateCheck)
  - 홀과 동일한 객체 존재 여부 검사
- **G41**: 소로 미연결 검사 → `5_relation_check.csv`
  - 규칙: `소로_미연결검사` (LineConnectivityWithFilter)
  - 소로(road_se=RDS014)가 도로중심선과 연결되어야 함
- **G42**: 도로중심선 단절 검사 → `5_relation_check.csv`
  - 규칙: `도로중심선_단절검사` (LineDisconnection)
  - 도로중심선이 중간에 단절된 경우 검사
- **G43**: 도로경계선 단절 검사 → `5_relation_check.csv`
  - 규칙: `도로경계선_단절검사` (LineDisconnectionWithAttribute)
  - 동일 ROAD_SE를 가진 도로경계선이 단절 검사
- **G44**: 도로면형-경계선 불일치 검사 → `5_relation_check.csv`
  - 규칙: `도로면형_경계선불일치` (PolygonBoundaryMatch)
  - 도로 면형과 경계선이 일치해야 함
- **G48**: 선형 끝점 초과미달 검사 → `5_relation_check.csv`
  - 규칙: `선형끝점_초과미달검사`, `선형끝점_초과미달검사_철도`, `선형끝점_초과미달검사_하천` (LineEndpointWithinPolygon)
  - 중심선 끝점이 경계면 내부에 포함되어야 함 (0.3m 범위)
- **G50**: 결함있는 연결 검사 → `5_relation_check.csv`
  - 규칙: `결함있는_연결검사` (DefectiveConnection)
  - 중심선 연결 결함 검사

---

## ❌ 누락된 항목

### G3 - 관계성/위상 검사

#### G19 - NFID 유실 검사
- **누락 내용**: 수정전 DB에 존재하던 NFID가 유실된 경우 검사
- **현재 상태**: NFID 관련 검사 규칙 없음
- **추가 필요**: NFID 유실 검사 로직 구현 (이전 DB와 비교 필요)
- **제안**: 별도 NFID 검사 프로세서 또는 관계 검사 확장


#### G33 - 차도간 교차검사
- **누락 내용**: 
  - 도로경계면이 교차되는 경우(동일 위상코드간)
  - 도로중심선이 교차되는 경우(동일 위상코드간)
- **현재 상태**: 동일 위상코드간 교차 검사 없음
- **추가 필요**: 동일 위상코드(도로구분)를 가진 도로 간 교차 검사
- **제안**: `5_relation_check.csv`에 교차 검사 CaseType 추가

#### G34 - 차도와 도로시설물관계 검사
- **누락 내용**: 
  - 도로경계면(혹은 중심선)에 도로시설 레이어가 공간중첩되나, 도로시설물 속성이 입력되지 않은 경우
  - 도로경계면(혹은 중심선)에 도로시설물 속성이 입력되었으나, 도로시설물 레이어가 없는 경우
- **현재 상태**: 도로-도로시설 속성 일치 검사 없음
- **추가 필요**: 도로와 도로시설의 속성 일치 검사
- **제안**: `5_relation_check.csv`에 속성 일치 검사 CaseType 추가


#### G39 - 표고점 위치간격 검사
- **누락 내용**: 
  - 평탄지기준 표고점묘사: 5K 200m간격, 1K 40m간격
  - 도로기준 표고점묘사: 5K - 교차로, 교량부분. 1K - 인도 20m간격, 차도 30m간격
- **현재 상태**: 표고점 위치간격 검사 없음
- **추가 필요**: 표고점 간 최소 거리 검사 (축척별, 도로별)
- **제안**: `5_relation_check.csv`에 표고점 간격 검사 CaseType 추가

#### G40 - 옥상시설물-건물높이 논리 검사
- **누락 내용**: 
  - 옥상시설물의 최저높이 값이 건물최저높이 값과 일치하지 않는 경우
  - 옥상시설물의 기본높이 값이 최저높이값보다 낮은 경우
- **현재 상태**: 옥상시설물-건물 높이 관계 검사 없음
- **추가 필요**: 옥상시설물과 건물의 높이 관계 검사
- **제안**: `5_relation_check.csv`에 옥상시설물-건물 관계 검사 추가



---

## 📊 요약

### 구현 완료: 50개 항목
- **G1** (4개): 스키마 규칙 검사
- **G2** (12개): 속성 입력 검사 (G6, G7, G8, G9, G10, G11, G12, G13, G15, G16, G21, G63)
- **G3** (32개): 관계성/위상 검사 (G20, G22, G23, G24, G25, G26, G27, G28/G29, G30, G32, G35, G36, G37, G38, G41, G42, G43, G44, G45, G46, G47, G48, G49, G50, G51, G52, G53, G54, G55, G56, G57, G58, G59)
- **G4** (1개): 포맷 검사 (G62)

### 누락: 8개 항목
- **G3**: 8개 (NFID 관련 1개, 관계성 검사 7개)

### 제외 항목 (표준검사 아님)
- **G1-5**: 테이블부착 검사 (표준검사가 아님)
- **G5**: 도화비교 검사 (G17, G18, G64 - 도화 부분 검수 항목은 제외)
- **G14**: 속성범위 검사-산높이 (산 관련 테이블/필드 확인 필요, 제외)
- **G31**: 묘지계기호 존재 검사 (묘지계-묘지 관계 검사, 제외)
- **G60-G61**: 인접 검사 (도곽 정보 필요, 제외)

### 우선순위 권장사항

#### 높은 우선순위 (즉시 구현 권장)
1. **G19**: NFID 유실 검사 (이전 DB 비교 필요)

#### 중간 우선순위
2. **G40**: 옥상시설물-건물높이 논리 검사
3. **G33**: 차도간 교차검사
4. **G34**: 차도와 도로시설물관계 검사

#### 낮은 우선순위 (복잡한 로직 필요)
5. **G39**: 표고점 위치간격 검사 (복잡한 거리 계산)

---

## 📝 추가 검토 사항

1. **G5 - 테이블부착 검사**: 
   - 이 항목은 표준검사가 아니므로 제외
   - 구조화중간성과_검수항목.md에서 취소선 처리됨

2. **NFID 검사**: 
   - G20 (NFID 중복)은 이미 구현됨 (`2_schema_check.csv`의 UK=Y 설정)
   - G21 (NFID 형식)은 이미 구현됨 (`4_attribute_check.csv`의 Regex 규칙)
   - G22 (참조NFID)는 이미 구현됨 (`2_schema_check.csv`의 FK=Y 설정)
   - G19 (NFID 유실)은 별도 구현 필요 (이전 DB 비교 필요)

3. **도화비교 검사 (G17, G18, G64)**: 
   - 도화 부분 검수 항목은 제외
   - 외부 도화 데이터와의 비교는 표준검사 범위에 포함되지 않음

4. **제외된 검사 항목**:
   - **G14 - 산높이**: 산 관련 테이블/필드 확인 필요로 인해 제외
   - **G31 - 묘지계기호 존재 검사**: 묘지계-묘지 관계 검사로 인해 제외
   - **G60-G61 - 인접 검사**: 도곽 정보 필요로 인해 제외
