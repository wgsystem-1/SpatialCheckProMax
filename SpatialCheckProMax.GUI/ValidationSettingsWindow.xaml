<Window x:Class="SpatialCheckProMax.GUI.ValidationSettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="검수 설정" Height="500" Width="700"
        WindowStartupLocation="CenterOwner" 
        Background="White"
        ResizeMode="CanResize"
        Loaded="Window_Loaded">
    
    <Window.Resources>
        <!-- 아이콘 리소스 정의 -->
        <Geometry x:Key="SettingsIcon">M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z</Geometry>
        <Geometry x:Key="FolderIcon">M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z</Geometry>
        <Geometry x:Key="DatabaseIcon">M12,3C7.58,3 4,4.79 4,7C4,9.21 7.58,11 12,11C16.42,11 20,9.21 20,7C20,4.79 16.42,3 12,3M4,9V12C4,14.21 7.58,16 12,16C16.42,16 20,14.21 20,12V9C20,11.21 16.42,13 12,13C7.58,13 4,11.21 4,9M4,14V17C4,19.21 7.58,21 12,21C16.42,21 20,19.21 20,17V14C20,16.21 16.42,18 12,18C7.58,18 4,16.21 4,14Z</Geometry>
        <Geometry x:Key="LayersIcon">M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z</Geometry>
        <Geometry x:Key="LocationIcon">M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z</Geometry>
        <Geometry x:Key="MapIcon">M12,2L13.09,8.26L22,9L17,14L18.18,23L12,19.77L5.82,23L7,14L2,9L10.91,8.26L12,2Z</Geometry>
        <Geometry x:Key="RefreshIcon">M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z</Geometry>
        <Geometry x:Key="CheckIcon">M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z</Geometry>
        <Geometry x:Key="CloseIcon">M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z</Geometry>
        <Geometry x:Key="HelpIcon">M11,18H13V16H11V18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z</Geometry>
    </Window.Resources>
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 헤더 -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                <Path Data="{StaticResource SettingsIcon}" 
                      Fill="#3B82F6" 
                      Width="24" Height="24" 
                      Stretch="Uniform" 
                      Margin="0,0,10,0"/>
                <TextBlock Text="검수 설정 파일 관리" 
                          FontSize="20" 
                          FontWeight="Bold" 
                          VerticalAlignment="Center"/>
            </StackPanel>
            <TextBlock Text="각 검수 단계에서 사용할 설정 파일을 지정하세요" 
                      Foreground="Gray" 
                      Margin="34,0,0,0"/>
        </StackPanel>
        
        <!-- 설정 파일들 & 단계 스위치 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- 검수 대상 경로 설정 -->
                <GroupBox Header="검수 대상 파일/폴더" Margin="0,0,0,15" Padding="15">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="TargetPathTextBox" Grid.Column="0" IsReadOnly="True" Margin="0,0,10,0" Padding="8" BorderBrush="LightGray"/>
                        <Button Grid.Column="1" Content="경로 선택" Padding="15,8" Background="#2563EB" Foreground="White" BorderThickness="0" Click="BrowseTargetPath_Click"/>
                    </Grid>
                </GroupBox>

                <!-- 단계 사용 여부 스위치 -->
                <GroupBox Header="검수 단계 사용 여부" Margin="0,0,0,15" Padding="15">
                    <UniformGrid Columns="5" Rows="1">
                        <CheckBox x:Name="Stage1EnabledCheck" Content="1단계 사용" IsChecked="True"/>
                        <CheckBox x:Name="Stage2EnabledCheck" Content="2단계 사용" IsChecked="True"/>
                        <CheckBox x:Name="Stage3EnabledCheck" Content="3단계 사용" IsChecked="True"/>
                        <CheckBox x:Name="Stage4EnabledCheck" Content="4단계 사용" IsChecked="True"/>
                        <CheckBox x:Name="Stage5EnabledCheck" Content="5단계 사용" IsChecked="True"/>
                    </UniformGrid>
                </GroupBox>

                <!-- 시스템 리소스 설정 -->
                <GroupBox Header="시스템 리소스 설정" Margin="0,0,0,15" Padding="15">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- 현재 시스템 상태 표시 -->
                        <TextBlock Grid.Row="0" Grid.ColumnSpan="3" Text="현재 시스템 상태" FontWeight="Bold" Margin="0,0,0,10"/>
                        
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="CPU:" Margin="0,0,10,5" VerticalAlignment="Center"/>
                        <TextBlock x:Name="CurrentCpuStatus" Grid.Row="1" Grid.Column="1" Text="분석 중..." Foreground="Blue" VerticalAlignment="Center"/>
                        <Button x:Name="RefreshSystemStatusBtn" Grid.Row="1" Grid.Column="2" Content="새로고침" Padding="8,4" Margin="10,0,0,0" Click="RefreshSystemStatus_Click"/>
                        
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="메모리:" Margin="0,0,10,5" VerticalAlignment="Center"/>
                        <TextBlock x:Name="CurrentMemoryStatus" Grid.Row="2" Grid.Column="1" Text="분석 중..." Foreground="Blue" VerticalAlignment="Center"/>

                        <!-- 병렬 처리 설정 -->
                        <TextBlock Grid.Row="3" Grid.Column="0" Text="병렬 처리:" Margin="0,10,10,5" VerticalAlignment="Center"/>
                        <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal" Margin="0,10,0,0">
                            <CheckBox x:Name="EnableParallelProcessingCheck" Content="활성화" IsChecked="True" Margin="0,0,20,0" VerticalAlignment="Center"/>
                            <TextBlock Text="최대 병렬도:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                            <TextBox x:Name="MaxParallelismTextBox" Width="60" Text="4" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <TextBlock Text="배치 크기:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                            <TextBox x:Name="BatchSizeTextBox" Width="80" Text="1000" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- 실시간 모니터링 -->
                        <TextBlock Grid.Row="4" Grid.Column="0" Text="실시간 모니터링:" Margin="0,10,10,5" VerticalAlignment="Center"/>
                        <StackPanel Grid.Row="4" Grid.Column="1" Orientation="Horizontal" Margin="0,10,0,0">
                            <CheckBox x:Name="EnableRealTimeMonitoringCheck" Content="활성화" IsChecked="False" Margin="0,0,20,0" VerticalAlignment="Center"/>
                            <TextBlock Text="모니터링 간격:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                            <TextBox x:Name="MonitoringIntervalTextBox" Width="60" Text="5" VerticalAlignment="Center" Margin="0,0,5,0"/>
                            <TextBlock Text="초" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </GroupBox>

                <!-- 설정 CSV 미리보기 탭 -->
                <GroupBox Header="설정 미리보기 (체크 해제 시 해당 행 스킵)" Margin="0,0,0,15" Padding="10">
                    <TabControl x:Name="PreviewTabControl">
                        <TabItem Header="1단계 테이블">
                            <DataGrid x:Name="Stage1Grid"
                                      AutoGenerateColumns="False"
                                      CanUserAddRows="False"
                                      CanUserDeleteRows="False"
                                      IsReadOnly="False"
                                      SelectionMode="Extended"
                                      Margin="0,5,0,0">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="60">
                                        <DataGridTemplateColumn.Header>
                                            <CheckBox Content="사용" Click="Stage1ToggleAll_Click"/>
                                        </DataGridTemplateColumn.Header>
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <CheckBox IsChecked="{Binding Use, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTextColumn Binding="{Binding Item.TableId}" Header="TableId" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.TableName}" Header="TableName" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.GeometryType}" Header="GeometryType" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.CoordinateSystem}" Header="CRS" Width="*"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </TabItem>
                        <TabItem Header="2단계 스키마">
                            <DataGrid x:Name="Stage2Grid"
                                      AutoGenerateColumns="False"
                                      CanUserAddRows="False"
                                      CanUserDeleteRows="False"
                                      IsReadOnly="False"
                                      Margin="0,5,0,0">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="60">
                                        <DataGridTemplateColumn.Header>
                                            <CheckBox Content="사용" Click="Stage2ToggleAll_Click"/>
                                        </DataGridTemplateColumn.Header>
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <CheckBox IsChecked="{Binding Use, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTextColumn Binding="{Binding Item.TableId}" Header="TableId" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.ColumnName}" Header="FieldName" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.ColumnKoreanName}" Header="FieldAlias" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.DataType}" Header="DataType" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.Length}" Header="Length" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.IsNotNull}" Header="NN" Width="60"/>
                                    <DataGridTextColumn Binding="{Binding Item.UniqueKey}" Header="UK" Width="60"/>
                                    <DataGridTextColumn Binding="{Binding Item.ForeignKey}" Header="FK" Width="60"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </TabItem>
                        <TabItem Header="3단계 지오메트리">
                            <DataGrid x:Name="Stage3Grid"
                                      AutoGenerateColumns="False"
                                      CanUserAddRows="False"
                                      CanUserDeleteRows="False"
                                      IsReadOnly="False"
                                      Margin="0,5,0,0">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="60">
                                        <DataGridTemplateColumn.Header>
                                            <CheckBox Content="사용" Click="Stage3ToggleAll_Click"/>
                                        </DataGridTemplateColumn.Header>
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <CheckBox IsChecked="{Binding Use, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTextColumn Binding="{Binding Item.TableId}" Header="TableId" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.TableName}" Header="TableName" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.GeometryType}" Header="GeometryType" Width="*"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </TabItem>
                        <TabItem Header="5단계 공간관계">
                            <DataGrid x:Name="Stage5Grid"
                                      AutoGenerateColumns="False"
                                      CanUserAddRows="False"
                                      CanUserDeleteRows="False"
                                      IsReadOnly="False"
                                      Margin="0,5,0,0">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="60">
                                        <DataGridTemplateColumn.Header>
                                            <CheckBox Content="사용" Click="Stage5ToggleAll_Click"/>
                                        </DataGridTemplateColumn.Header>
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <CheckBox IsChecked="{Binding Use, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTextColumn Binding="{Binding Item.RuleId}" Header="규칙ID" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.CaseType}" Header="케이스" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.MainTableId}" Header="메인테이블" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.RelatedTableId}" Header="관련테이블" Width="*"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </TabItem>
                        <TabItem Header="4단계 속성">
                            <DataGrid x:Name="Stage4Grid"
                                      AutoGenerateColumns="False"
                                      CanUserAddRows="False"
                                      CanUserDeleteRows="False"
                                      IsReadOnly="False"
                                      Margin="0,5,0,0">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="60">
                                        <DataGridTemplateColumn.Header>
                                            <CheckBox Content="사용" Click="Stage4ToggleAll_Click"/>
                                        </DataGridTemplateColumn.Header>
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <CheckBox IsChecked="{Binding Use, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Center"/>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTextColumn Binding="{Binding Item.RuleId}" Header="규칙ID" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.TableId}" Header="TableId" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.TableName}" Header="TableName" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.FieldName}" Header="FieldName" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.CheckType}" Header="CheckType" Width="*"/>
                                    <DataGridTextColumn Binding="{Binding Item.Parameters}" Header="Parameters" Width="*"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </TabItem>
                    </TabControl>
                </GroupBox>
                <!-- 테이블 검수 설정 -->
                <GroupBox Header="1단계: 테이블 검수" Margin="0,0,0,15" Padding="15">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0" Text="정의 테이블 존재 여부, 지오메트리 타입/좌표계 일치, 미정의 테이블 탐지" 
                                  Foreground="Gray" Margin="0,0,0,10"/>
                        
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBox x:Name="TableConfigPathTextBox" 
                                    Grid.Column="0"
                                    IsReadOnly="True"
                                    Margin="0,0,10,0"
                                    Padding="8"
                                    BorderBrush="LightGray"/>
                            
                            <Button Grid.Column="1" Content="파일 선택" 
                                   Padding="15,8"
                                   Background="DodgerBlue"
                                   Foreground="White"
                                   BorderThickness="0"
                                   Click="BrowseTableConfig_Click"/>
                        </Grid>
                    </Grid>
                </GroupBox>
                
                <!-- 스키마 검수 설정 -->
                <GroupBox Header="2단계: 스키마 검수" Margin="0,0,0,15" Padding="15">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0" Text="컬럼명·데이터타입·길이·NN, UK/FK 등 제약조건 일치" 
                                  Foreground="Gray" Margin="0,0,0,10"/>
                        
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBox x:Name="SchemaConfigPathTextBox" 
                                    Grid.Column="0"
                                    IsReadOnly="True"
                                    Margin="0,0,10,0"
                                    Padding="8"
                                    BorderBrush="LightGray"/>
                            
                            <Button Grid.Column="1" Content="파일 선택" 
                                   Padding="15,8"
                                   Background="DodgerBlue"
                                   Foreground="White"
                                   BorderThickness="0"
                                   Click="BrowseSchemaConfig_Click"/>
                        </Grid>
                    </Grid>
                </GroupBox>
                
                <!-- 지오메트리 검수 설정 -->
                <GroupBox Header="3단계: 지오메트리 검수" Margin="0,0,0,15" Padding="15">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0" Text="중복/겹침/자가교차, 슬리버, 작은면적·짧은객체, 홀 폴리곤 등 공간 오류" 
                                  Foreground="Gray" Margin="0,0,0,10"/>
                        
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBox x:Name="GeometryConfigPathTextBox" 
                                    Grid.Column="0"
                                    IsReadOnly="True"
                                    Margin="0,0,10,0"
                                    Padding="8"
                                    BorderBrush="LightGray"/>
                            
                            <Button Grid.Column="1" Content="파일 선택" 
                                   Padding="15,8"
                                   Background="DodgerBlue"
                                   Foreground="White"
                                   BorderThickness="0"
                                   Click="BrowseGeometryConfig_Click"/>
                        </Grid>
                    </Grid>
                </GroupBox>

                <!-- 지오메트리 검수 기준 설정 -->
                <GroupBox Header="지오메트리 검수 기준" Margin="0,0,0,15" Padding="15">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0" Text="짧은객체 길이, 작은면적, 슬리버 면적/형태지수/신장률, 중복·겹침·꼬임 허용오차" 
                                  Foreground="Gray" Margin="0,0,0,10"/>
                        
                        <!-- 기준 파일 경로 -->
                        <Grid Grid.Row="1" Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBox x:Name="GeometryCriteriaPathTextBox" 
                                    Grid.Column="0"
                                    IsReadOnly="True"
                                    Margin="0,0,10,0"
                                    Padding="8"
                                    BorderBrush="LightGray"/>
                            
                            <Button Grid.Column="1" Content="기준 파일 선택" 
                                   Padding="15,8"
                                   Background="Orange"
                                   Foreground="White"
                                   BorderThickness="0"
                                   Click="BrowseGeometryCriteria_Click"/>
                        </Grid>

                        <!-- 주요 기준값 설정 -->
                        <Grid Grid.Row="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="주요 기준값" FontWeight="Bold" Margin="0,0,0,5"/>
                                
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="짧은 객체:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBox x:Name="MinLengthTextBox" Grid.Column="1" Text="1.0" Padding="3" Margin="0,0,5,0"/>
                                    <TextBlock Grid.Column="2" Text="m" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="작은 면적:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBox x:Name="MinAreaTextBox" Grid.Column="1" Text="1.0" Padding="3" Margin="0,0,5,0"/>
                                    <TextBlock Grid.Column="2" Text="㎡" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="슬리버 면적:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBox x:Name="SliverAreaTextBox" Grid.Column="1" Text="2.0" Padding="3" Margin="0,0,5,0"/>
                                    <TextBlock Grid.Column="2" Text="㎡" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="슬리버 형태지수:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBox x:Name="SliverShapeIndexTextBox" Grid.Column="1" Text="0.1" Padding="3" Margin="0,0,5,0"/>
                                    <TextBlock Grid.Column="2" Text="비율" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="슬리버 신장률:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBox x:Name="SliverElongationTextBox" Grid.Column="1" Text="10.0" Padding="3" Margin="0,0,5,0"/>
                                    <TextBlock Grid.Column="2" Text="배" VerticalAlignment="Center"/>
                                </Grid>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                <TextBlock Text="허용 오차" FontWeight="Bold" Margin="0,0,0,5"/>
                                
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="중복 거리:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBox x:Name="DuplicateToleranceTextBox" Grid.Column="1" Text="0.001" Padding="3" Margin="0,0,5,0"/>
                                    <TextBlock Grid.Column="2" Text="m" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="겹침 면적:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBox x:Name="OverlapToleranceTextBox" Grid.Column="1" Text="0.001" Padding="3" Margin="0,0,5,0"/>
                                    <TextBlock Grid.Column="2" Text="㎡" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="꼬임 각도:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBox x:Name="SelfIntersectionAngleTextBox" Grid.Column="1" Text="1.0" Padding="3" Margin="0,0,5,0"/>
                                    <TextBlock Grid.Column="2" Text="°" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="폴리곤내거리:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBox x:Name="PolygonInPolygonDistanceTextBox" Grid.Column="1" Text="0.1" Padding="3" Margin="0,0,5,0"/>
                                    <TextBlock Grid.Column="2" Text="m" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="스파이크 각도:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBox x:Name="SpikeAngleTextBox" Grid.Column="1" Text="10.0" Padding="3" Margin="0,0,5,0"/>
                                    <TextBlock Grid.Column="2" Text="°" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="링 폐합 오차:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBox x:Name="RingClosureToleranceTextBox" Grid.Column="1" Text="1e-8" Padding="3" Margin="0,0,5,0"/>
                                    <TextBlock Grid.Column="2" Text="m" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="네트워크 거리:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                    <TextBox x:Name="NetworkSearchDistanceTextBox" Grid.Column="1" Text="0.1" Padding="3" Margin="0,0,5,0"/>
                                    <TextBlock Grid.Column="2" Text="m" VerticalAlignment="Center"/>
                                </Grid>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </GroupBox>
                
                <!-- 5단계: 속성 관계 검수 설정 -->
                <GroupBox Header="4단계: 속성 관계 검수" Margin="0,0,0,15" Padding="15">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Text="코드리스트·범위·정규식·조건부(If/Then)·다중조건, 교차테이블 규칙 검증"
                                   Foreground="Gray" Margin="0,0,0,10"/>

                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBox x:Name="AttributeConfigPathTextBox"
                                    Grid.Column="0"
                                    IsReadOnly="True"
                                    Margin="0,0,10,0"
                                    Padding="8"
                                    BorderBrush="LightGray"/>

                            <Button Grid.Column="1" Content="파일 선택"
                                   Padding="15,8"
                                   Background="DodgerBlue"
                                   Foreground="White"
                                   BorderThickness="0"
                                   Click="BrowseAttributeConfig_Click"/>
                        </Grid>
                    </Grid>
                </GroupBox>

                <!-- 4단계: 공간 관계 검수 설정 -->
                <GroupBox Header="5단계: 공간 관계 검수" Margin="0,0,0,15" Padding="15">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0" Text="점-폴리곤 포함, 선-폴리곤 경계 내 포함(허용오차), 폴리곤 경계 정합, 참조 무결성" 
                                  Foreground="Gray" Margin="0,0,0,10"/>
                        
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBox x:Name="RelationConfigPathTextBox" 
                                    Grid.Column="0"
                                    IsReadOnly="True"
                                    Margin="0,0,10,0"
                                    Padding="8"
                                    BorderBrush="LightGray"/>
                            
                            <Button Grid.Column="1" Content="파일 선택" 
                                   Padding="15,8"
                                   Background="DodgerBlue"
                                   Foreground="White"
                                   BorderThickness="0"
                                   Click="BrowseRelationConfig_Click"/>
                        </Grid>
                    </Grid>
                </GroupBox>
                
                <!-- 기본값 복원 -->
                <GroupBox Header="설정 관리" Padding="15">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="기본 설정 복원" FontWeight="Bold"/>
                            <TextBlock Text="모든 설정을 기본값으로 되돌립니다" 
                                      Foreground="Gray" Margin="0,5,0,0"/>
                        </StackPanel>
                        
                        <Button Grid.Column="1" x:Name="ResetToDefaultButton" 
                               Content="기본값 복원" 
                               Padding="15,8"
                               Background="Orange"
                               Foreground="White"
                               BorderThickness="0"
                               Click="ResetToDefault_Click"/>
                    </Grid>
                </GroupBox>
                
                <!-- 도움말 -->
                <Border Background="#F0F8FF" BorderBrush="LightBlue" BorderThickness="1" 
                       CornerRadius="5" Padding="15" Margin="0,15,0,0">
                    <StackPanel>
                        <TextBlock Text="도움말" FontWeight="Bold" Margin="0,0,0,10"/>
                        <TextBlock TextWrapping="Wrap">
                            • 기본 설정 파일은 애플리케이션 설치 폴더의 Config 디렉토리에 있습니다.<LineBreak/>
                            • 사용자 정의 설정 파일을 사용하려면 '파일 선택' 버튼을 클릭하여 파일을 선택하세요.<LineBreak/>
                            • 설정 파일은 UTF-8 인코딩의 CSV 형식이어야 합니다.
                        </TextBlock>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
        
        <!-- 하단 버튼 -->
        <Border Grid.Row="2" Background="#F8F9FA" BorderBrush="#E9ECEF" 
               BorderThickness="0,1,0,0" Padding="0,10,0,5" Margin="-20,0,-20,-20">
            <Grid Margin="20,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <Button x:Name="OkButton" Grid.Column="1" Content="확인" 
                       Padding="25,10"
                       Background="Green"
                       Foreground="White"
                       BorderThickness="0"
                       Margin="0,0,10,0"
                       IsDefault="True" 
                       Click="Ok_Click"/>
                
                <Button x:Name="CancelButton" Grid.Column="2" Content="취소" 
                       Padding="25,10"
                       Background="Gray"
                       Foreground="White"
                       BorderThickness="0"
                       IsCancel="True" 
                       Click="Cancel_Click"/>
            </Grid>
        </Border>
    </Grid>
</Window>
