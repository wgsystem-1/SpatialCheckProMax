<Window x:Class="SpatialCheckProMax.GUI.Views.FolderSelectionPreviewDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="검수 대상 확인" 
        Height="600" Width="800"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False">
    
    <Window.Resources>
        <Style x:Key="InfoCard" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="4" ShadowDepth="2" Opacity="0.1" Direction="270"/>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="ListHeader" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#374151"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
    </Window.Resources>
    
    <Grid Background="#F3F4F6">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 헤더 -->
        <Border Grid.Row="0" Background="White" Padding="20">
            <StackPanel>
                <TextBlock Text="폴더 선택 확인" FontSize="20" FontWeight="Bold" Foreground="#1F2937"/>
                <TextBlock x:Name="SelectedPathText" 
                          Text="선택한 폴더: " 
                          FontSize="14" 
                          Foreground="#6B7280" 
                          Margin="0,8,0,0"/>
            </StackPanel>
        </Border>
        
        <!-- 내용 -->
        <Grid Grid.Row="1" Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- 검수 대상 -->
            <Border Grid.Row="0" Style="{StaticResource InfoCard}">
                <StackPanel>
                    <Grid Margin="0,0,0,12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                            <TextBlock Text="✓" Foreground="#10B981" FontSize="16" FontWeight="Bold" Margin="0,0,8,0"/>
                            <TextBlock Text="검수 대상 FileGDB" Style="{StaticResource ListHeader}"/>
                            <TextBlock x:Name="TargetCountText" 
                                      Text="(0개)" 
                                      Foreground="#6B7280" 
                                      Margin="8,0,0,0"/>
                        </StackPanel>
                        
                        <Button Grid.Column="1" 
                                x:Name="AddGdbButton"
                                Content="+ FileGDB 추가"
                                Click="AddGdbButton_Click"
                                Margin="0,0,8,0"
                                Padding="12,6"
                                Background="#10B981"
                                Foreground="White"
                                BorderThickness="0"
                                Cursor="Hand"/>
                        
                        <Button Grid.Column="2" 
                                x:Name="RemoveGdbButton"
                                Content="선택 제거"
                                Click="RemoveGdbButton_Click"
                                Padding="12,6"
                                Background="#EF4444"
                                Foreground="White"
                                BorderThickness="0"
                                Cursor="Hand"
                                IsEnabled="False"/>
                    </Grid>
                    
                    <DataGrid x:Name="TargetGdbGrid" 
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              GridLinesVisibility="Horizontal"
                              HeadersVisibility="Column"
                              BorderThickness="0"
                              MaxHeight="200"
                              VerticalScrollBarVisibility="Auto"
                              SelectionMode="Extended"
                              SelectionChanged="TargetGdbGrid_SelectionChanged">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="FileGDB 이름" 
                                               Binding="{Binding Name}" 
                                               Width="250"/>
                            <DataGridTextColumn Header="상대 경로" 
                                               Binding="{Binding RelativePath}" 
                                               Width="300"/>
                            <DataGridTextColumn Header="크기" 
                                               Binding="{Binding SizeText}" 
                                               Width="100">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="HorizontalAlignment" Value="Right"/>
                                        <Setter Property="Margin" Value="0,0,10,0"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>
            </Border>
            
            <!-- 제외된 항목 -->
            <Border Grid.Row="2" Style="{StaticResource InfoCard}" 
                    x:Name="ExcludedSection"
                    Visibility="Collapsed">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                        <TextBlock Text="✗" Foreground="#EF4444" FontSize="16" FontWeight="Bold" Margin="0,0,8,0"/>
                        <TextBlock Text="제외된 항목" Style="{StaticResource ListHeader}"/>
                        <TextBlock x:Name="ExcludedCountText" 
                                  Text="(0개)" 
                                  Foreground="#6B7280" 
                                  Margin="8,0,0,0"/>
                    </StackPanel>
                    
                    <DataGrid x:Name="ExcludedGdbGrid" 
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              GridLinesVisibility="Horizontal"
                              HeadersVisibility="Column"
                              BorderThickness="0"
                              MaxHeight="150"
                              VerticalScrollBarVisibility="Auto">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="항목 이름" 
                                               Binding="{Binding Name}" 
                                               Width="250"/>
                            <DataGridTextColumn Header="제외 이유" 
                                               Binding="{Binding Reason}" 
                                               Width="200">
                                <DataGridTextColumn.CellStyle>
                                    <Style TargetType="DataGridCell">
                                        <Setter Property="Foreground" Value="#EF4444"/>
                                    </Style>
                                </DataGridTextColumn.CellStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="상대 경로" 
                                               Binding="{Binding RelativePath}" 
                                               Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>
            </Border>
        </Grid>
        
        <!-- 오류 결과 저장 위치 -->
        <Border Grid.Row="2" Background="#E0F2FE" Padding="16" Margin="20,0,20,10">
            <StackPanel>
                <TextBlock Text="오류 결과 저장 위치" FontWeight="SemiBold" Foreground="#0369A1" Margin="0,0,0,4"/>
                <TextBlock x:Name="QcErrorsPathText" 
                          Text="-" 
                          FontFamily="Consolas"
                          Foreground="#0C4A6E"/>
            </StackPanel>
        </Border>
        
        <!-- 버튼 -->
        <Border Grid.Row="3" Background="White" Padding="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" 
                          x:Name="WarningText"
                          Text=""
                          Foreground="#D97706"
                          VerticalAlignment="Center"
                          Visibility="Collapsed"/>
                
                <Button Grid.Column="1" 
                        x:Name="CancelButton"
                        Content="취소" 
                        Width="100" 
                        Margin="0,0,10,0"
                        Click="CancelButton_Click">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Background" Value="#E5E7EB"/>
                            <Setter Property="Foreground" Value="#374151"/>
                            <Setter Property="BorderThickness" Value="0"/>
                            <Setter Property="Padding" Value="12,8"/>
                            <Setter Property="FontWeight" Value="Medium"/>
                        </Style>
                    </Button.Style>
                </Button>
                
                <Button Grid.Column="2" 
                        x:Name="ContinueButton"
                        Content="계속" 
                        Width="100"
                        Click="ContinueButton_Click"
                        IsEnabled="False">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Background" Value="#3B82F6"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="BorderThickness" Value="0"/>
                            <Setter Property="Padding" Value="12,8"/>
                            <Setter Property="FontWeight" Value="Medium"/>
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="#9CA3AF"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>
        </Border>
    </Grid>
</Window>

