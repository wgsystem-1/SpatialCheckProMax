# SpatialCheckProMax ë°°í¬ ê°€ì´ë“œ

> **ë²„ì „**: 2.0 | **ìµœì¢… ìˆ˜ì •**: 2026-01-04 | **ì‘ì„±ì**: (ì£¼)ìš°ë¦¬ê°•ì‚°ì‹œìŠ¤í…œ

## ğŸ“¦ ë°°í¬ ë²„ì „ êµ¬ì„± ë°©ì•ˆ

### 1. ì¸ìŠ¤í†¨ ë²„ì „ ì œì‘ ê°€ëŠ¥ ì—¬ë¶€

**âœ… ê°€ëŠ¥í•©ë‹ˆë‹¤.** ë‹¤ìŒ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¤ì¹˜ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

#### ì¶”ì²œ ë„êµ¬

1. **WiX Toolset** (Windows Installer XML)
   - Microsoft ê³µì‹ ë„êµ¬
   - MSI ì„¤ì¹˜ íŒ¨í‚¤ì§€ ìƒì„±
   - Windows í‘œì¤€ ì„¤ì¹˜ ê²½í—˜ ì œê³µ
   - ë¬´ë£Œ, ì˜¤í”ˆì†ŒìŠ¤

2. **Inno Setup**
   - ê°„ë‹¨í•œ ì„¤ì • íŒŒì¼ ê¸°ë°˜
   - ë‹¨ì¼ ì‹¤í–‰ íŒŒì¼ ìƒì„± ê°€ëŠ¥
   - ë¬´ë£Œ, ì˜¤í”ˆì†ŒìŠ¤

3. **NSIS (Nullsoft Scriptable Install System)**
   - ìŠ¤í¬ë¦½íŠ¸ ê¸°ë°˜
   - ì‘ì€ ì„¤ì¹˜ íŒŒì¼ í¬ê¸°
   - ë¬´ë£Œ, ì˜¤í”ˆì†ŒìŠ¤

4. **Advanced Installer** (ìƒìš©)
   - GUI ê¸°ë°˜ ì„¤ì •
   - ìƒìš© ë¼ì´ì„ ìŠ¤ í•„ìš”

#### ì„¤ì¹˜ í”„ë¡œê·¸ë¨ì— í¬í•¨í•  í•­ëª©

- ì‹¤í–‰ íŒŒì¼ (`SpatialCheckProMax.GUI.exe`)
- ì˜ì¡´ DLL íŒŒì¼ë“¤
- GDAL Native DLL íŒŒì¼ë“¤
- Config ë””ë ‰í† ë¦¬ (CSV ì„¤ì • íŒŒì¼ë“¤)
- **Resources/Models ë””ë ‰í† ë¦¬** (AI ëª¨ë¸ íŒŒì¼ - v2.0 ì‹ ê·œ)
- .NET 9.0 ëŸ°íƒ€ì„ (ì„ íƒì‚¬í•­ - ì•„ë˜ ì°¸ì¡°)

---

### 2. ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ í¬í•¨ ê°€ëŠ¥ ì—¬ë¶€

**âš ï¸ ë¶€ë¶„ì ìœ¼ë¡œ ê°€ëŠ¥í•©ë‹ˆë‹¤.** ëŒ€ë¶€ë¶„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì˜¤í”ˆì†ŒìŠ¤ì´ì§€ë§Œ, ì¼ë¶€ ìƒìš© ë¼ì´ì„ ìŠ¤ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ (ë¬¸ì œ ì—†ìŒ)

| ë¼ì´ë¸ŒëŸ¬ë¦¬ | ë¼ì´ì„ ìŠ¤ | í¬í•¨ ê°€ëŠ¥ |
|-----------|---------|----------|
| **GDAL** | MIT/X11 | âœ… |
| **GDAL.Native** | MIT/X11 | âœ… |
| **NetTopologySuite** | BSD-3-Clause | âœ… |
| **Entity Framework Core** | Apache 2.0 | âœ… |
| **CsvHelper** | MS-PL | âœ… |
| **iTextSharp.LGPLv2.Core** | LGPL v2.1 | âœ… (LGPL ì¡°ê±´ ì¤€ìˆ˜ í•„ìš”) |
| **Microsoft.Extensions.*** | MIT | âœ… |
| **Serilog** | Apache 2.0 | âœ… |
| **PdfSharp-MigraDoc** | MIT | âœ… |
| **Microsoft.VisualBasic** | MIT | âœ… |
| **gRPC** | Apache 2.0 | âœ… |
| **Microsoft.ML.OnnxRuntime** | MIT | âœ… (v2.0 AI ê¸°ëŠ¥) |
| **CommunityToolkit.MVVM** | MIT | âœ… |

#### ì œê±° ì™„ë£Œ

| ë¼ì´ë¸ŒëŸ¬ë¦¬ | ë¼ì´ì„ ìŠ¤ | ìƒíƒœ |
|-----------|---------|------|
| **Xceed.Wpf.Toolkit** | ìƒìš© ë¼ì´ì„ ìŠ¤ | âœ… **ì œê±° ì™„ë£Œ** (ì‚¬ìš©í•˜ì§€ ì•ŠìŒ) |

**ì²˜ë¦¬ ì™„ë£Œ:**

- âœ… Xceed.Wpf.Toolkit ì‚¬ìš© ì—¬ë¶€ í™•ì¸ ì™„ë£Œ
- âœ… ì‹¤ì œ ì‚¬ìš©í•˜ì§€ ì•ŠìŒì„ í™•ì¸
- âœ… í”„ë¡œì íŠ¸ì—ì„œ íŒ¨í‚¤ì§€ ì°¸ì¡° ì œê±° ì™„ë£Œ
- âœ… ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì˜¤í”ˆì†ŒìŠ¤ë¡œ í™•ì¸ë¨

---

### 3. ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥ ì—¬ë¶€ (ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ ì„¤ì¹˜ ì—†ì´)

**âœ… ê°€ëŠ¥í•©ë‹ˆë‹¤.** ë‹¤ìŒ ì¡°ê±´ì„ ì¶©ì¡±í•˜ë©´ ë©ë‹ˆë‹¤:

#### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

1. **.NET 9.0 ëŸ°íƒ€ì„ í¬í•¨**
   - **ë°©ë²• 1**: Self-contained ë°°í¬ (ê¶Œì¥)
     - .NET ëŸ°íƒ€ì„ì„ í¬í•¨í•œ ë…ë¦½ ì‹¤í–‰ íŒŒì¼ ìƒì„±
     - íŒŒì¼ í¬ê¸° ì¦ê°€ (ì•½ 150-200MB)
     - .NET ì„¤ì¹˜ ë¶ˆí•„ìš”

   - **ë°©ë²• 2**: Framework-dependent ë°°í¬
     - .NET 9.0 Runtime ì„¤ì¹˜ í•„ìš”
     - íŒŒì¼ í¬ê¸° ì‘ìŒ (ì•½ 15-25MB)
     - ì‚¬ìš©ì PCì— .NET ì„¤ì¹˜ í•„ìš”

2. **GDAL Native DLL í¬í•¨**
   - í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œ ìë™ ë³µì‚¬ ì„¤ì •ë¨
   - `gdal.dll`, `gdal_wrap.dll` ë“± ë„¤ì´í‹°ë¸Œ DLL í¬í•¨ í•„ìš”

3. **ì˜ì¡´ DLL í¬í•¨**
   - ëª¨ë“  NuGet íŒ¨í‚¤ì§€ DLL ìë™ í¬í•¨ë¨
   - `PublishSingleFile` ì˜µì…˜ ì‚¬ìš© ì‹œ ë‹¨ì¼ íŒŒì¼ë¡œ íŒ¨í‚¤ì§• ê°€ëŠ¥

4. **AI ëª¨ë¸ íŒŒì¼ í¬í•¨ (v2.0 ì‹ ê·œ)**
   - `Resources/Models/geometry_corrector.onnx` í¬í•¨ í•„ìš”
   - AI ìë™ ìˆ˜ì • ê¸°ëŠ¥ ì‚¬ìš© ì‹œ í•„ìˆ˜

#### Self-contained ë°°í¬ ì„¤ì •

**í”„ë¡œì íŠ¸ íŒŒì¼ ìˆ˜ì •** (`SpatialCheckProMax.GUI.csproj`):

```xml
<PropertyGroup>
  <PublishSingleFile>true</PublishSingleFile>
  <SelfContained>true</SelfContained>
  <RuntimeIdentifier>win-x64</RuntimeIdentifier>
  <IncludeNativeLibrariesForSelfExtract>true</IncludeNativeLibrariesForSelfExtract>
</PropertyGroup>
```

**ë°°í¬ ëª…ë ¹ì–´:**

```bash
dotnet publish SpatialCheckProMax.GUI/SpatialCheckProMax.GUI.csproj -c Release -r win-x64 --self-contained true -p:PublishSingleFile=true -p:IncludeNativeLibrariesForSelfExtract=true
```

#### ë°°í¬ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
SpatialCheckProMax/
â”œâ”€â”€ SpatialCheckProMax.GUI.exe          # ë‹¨ì¼ ì‹¤í–‰ íŒŒì¼ (Self-contained)
â”œâ”€â”€ Config/                             # ì„¤ì • íŒŒì¼ ë””ë ‰í† ë¦¬
â”‚   â”œâ”€â”€ 1_table_check.csv
â”‚   â”œâ”€â”€ 2_schema_check.csv
â”‚   â”œâ”€â”€ 3_geometry_check.csv
â”‚   â”œâ”€â”€ 4_attribute_check.csv
â”‚   â”œâ”€â”€ 5_relation_check.csv
â”‚   â”œâ”€â”€ geometry_criteria.csv
â”‚   â””â”€â”€ codelist.csv
â”œâ”€â”€ Resources/                          # ë¦¬ì†ŒìŠ¤ ë””ë ‰í† ë¦¬ (v2.0)
â”‚   â””â”€â”€ Models/                         # AI ëª¨ë¸ íŒŒì¼
â”‚       â”œâ”€â”€ geometry_corrector.onnx     # ONNX AI ëª¨ë¸
â”‚       â””â”€â”€ model_metadata.json         # ëª¨ë¸ ë©”íƒ€ì •ë³´
â”œâ”€â”€ runtimes/                           # ë„¤ì´í‹°ë¸Œ ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚   â””â”€â”€ win-x64/
â”‚       â””â”€â”€ native/                     # GDAL Native DLLë“¤
â””â”€â”€ LICENSES/                           # ë¼ì´ì„ ìŠ¤ íŒŒì¼
```

---

## ğŸš€ ë°°í¬ ë‹¨ê³„ë³„ ê°€ì´ë“œ

### Step 1: Self-contained ë°°í¬ ì¤€ë¹„

1. **í”„ë¡œì íŠ¸ íŒŒì¼ í™•ì¸**
   - `SpatialCheckProMax.GUI.csproj`ì— Self-contained ì„¤ì • ì¶”ê°€

2. **ë¹Œë“œ ë° ë°°í¬**
   ```bash
   dotnet publish SpatialCheckProMax.GUI/SpatialCheckProMax.GUI.csproj `
     -c Release `
     -r win-x64 `
     --self-contained true `
     -p:PublishSingleFile=true `
     -p:IncludeNativeLibrariesForSelfExtract=true `
     -p:PublishTrimmed=false `
     -o ./publish
   ```

3. **ì¶œë ¥ í™•ì¸**
   - `publish/` ë””ë ‰í† ë¦¬ì— ë‹¨ì¼ ì‹¤í–‰ íŒŒì¼ ìƒì„± í™•ì¸
   - Config ë””ë ‰í† ë¦¬ í¬í•¨ í™•ì¸

### Step 2: ì„¤ì¹˜ í”„ë¡œê·¸ë¨ ì œì‘ (Inno Setup ì˜ˆì‹œ)

**Inno Setup ìŠ¤í¬ë¦½íŠ¸** (`setup.iss`):

```inno
[Setup]
AppName=SpatialCheckProMax
AppVersion=2.0.0
DefaultDirName={pf}\SpatialCheckProMax
DefaultGroupName=SpatialCheckProMax
OutputDir=installer
OutputBaseFilename=SpatialCheckProMax_Setup_v2.0.0
Compression=lzma2
SolidCompression=yes
ArchitecturesAllowed=x64
ArchitecturesInstallIn64BitMode=x64

[Files]
Source: "publish\SpatialCheckProMax.GUI.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "publish\*.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "publish\Config\*"; DestDir: "{app}\Config"; Flags: ignoreversion recursesubdirs
Source: "publish\Resources\*"; DestDir: "{app}\Resources"; Flags: ignoreversion recursesubdirs
Source: "publish\runtimes\*"; DestDir: "{app}\runtimes"; Flags: ignoreversion recursesubdirs
Source: "publish\LICENSES\*"; DestDir: "{app}\LICENSES"; Flags: ignoreversion recursesubdirs

[Icons]
Name: "{group}\SpatialCheckProMax"; Filename: "{app}\SpatialCheckProMax.GUI.exe"
Name: "{commondesktop}\SpatialCheckProMax"; Filename: "{app}\SpatialCheckProMax.GUI.exe"

[Run]
Filename: "{app}\SpatialCheckProMax.GUI.exe"; Description: "SpatialCheckProMax ì‹¤í–‰"; Flags: nowait postinstall skipifsilent
```

### Step 3: í…ŒìŠ¤íŠ¸

1. **ê¹¨ë—í•œ Windows PCì—ì„œ í…ŒìŠ¤íŠ¸**
   - .NET ë¯¸ì„¤ì¹˜ ìƒíƒœì—ì„œ ì‹¤í–‰ í™•ì¸
   - ëª¨ë“  ê¸°ëŠ¥ ì •ìƒ ë™ì‘ í™•ì¸

2. **ì˜ì¡´ì„± í™•ì¸**
   - Visual C++ Redistributable í•„ìš” ì—¬ë¶€ í™•ì¸
   - ê¸°íƒ€ ì‹œìŠ¤í…œ DLL í•„ìš” ì—¬ë¶€ í™•ì¸

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. GDAL Native DLL

- GDAL Native DLLì€ í”Œë«í¼ë³„ë¡œ ë‹¤ë¦…ë‹ˆë‹¤ (x64, x86)
- í˜„ì¬ í”„ë¡œì íŠ¸ëŠ” x64ë§Œ ì§€ì›í•˜ë„ë¡ ì„¤ì •ë¨
- x86 ì§€ì›ì´ í•„ìš”í•˜ë©´ ë³„ë„ ë¹Œë“œ í•„ìš”

### 2. ë¼ì´ì„ ìŠ¤ ê³ ì§€

ë°°í¬ ì‹œ ë‹¤ìŒ ë¼ì´ì„ ìŠ¤ ê³ ì§€ í•„ìš”:

- **LGPL ë¼ì´ì„ ìŠ¤** (iTextSharp.LGPLv2.Core)
  - ì†ŒìŠ¤ ì½”ë“œ ì œê³µ ë˜ëŠ” ë§í¬ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì •ë³´ ì œê³µ í•„ìš”
  - ì‚¬ìš©ìì—ê²Œ ë¼ì´ì„ ìŠ¤ ì •ë³´ ì œê³µ

- **ê¸°íƒ€ ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ì„ ìŠ¤**
  - ê° ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë¼ì´ì„ ìŠ¤ íŒŒì¼ í¬í•¨ ê¶Œì¥
  - `LICENSES.txt` íŒŒì¼ ìƒì„±

### 3. íŒŒì¼ í¬ê¸°

- **Self-contained**: ì•½ 150-200MB (AI ëª¨ë¸ í¬í•¨)
- **Framework-dependent**: ì•½ 15-25MB + .NET 9.0 Runtime (ì•½ 50-70MB)

### 4. ì„±ëŠ¥

- Self-contained ë°°í¬ëŠ” ì²« ì‹¤í–‰ ì‹œ ì••ì¶• í•´ì œ ì‹œê°„ ì†Œìš”
- ì´í›„ ì‹¤í–‰ì€ ì •ìƒ ì†ë„

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°°í¬ ì „ í™•ì¸ì‚¬í•­

- [ ] Self-contained ë°°í¬ ì„¤ì • ì™„ë£Œ
- [ ] Config ë””ë ‰í† ë¦¬ í¬í•¨ í™•ì¸
- [ ] GDAL Native DLL í¬í•¨ í™•ì¸
- [ ] **AI ëª¨ë¸ íŒŒì¼ í¬í•¨ í™•ì¸** (`Resources/Models/geometry_corrector.onnx`)
- [ ] ê¹¨ë—í•œ PCì—ì„œ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [ ] ë¼ì´ì„ ìŠ¤ ê³ ì§€ íŒŒì¼ í¬í•¨
- [ ] ì„¤ì¹˜ í”„ë¡œê·¸ë¨ ì œì‘ ì™„ë£Œ
- [ ] ì‚¬ìš©ì ë§¤ë‰´ì–¼ í¬í•¨ (ì„ íƒ)

### ë°°í¬ í›„ í™•ì¸ì‚¬í•­

- [ ] ì„¤ì¹˜ í”„ë¡œê·¸ë¨ ì •ìƒ ë™ì‘
- [ ] .NET ë¯¸ì„¤ì¹˜ PCì—ì„œ ì‹¤í–‰ í™•ì¸
- [ ] ëª¨ë“  ê²€ìˆ˜ ê¸°ëŠ¥ ì •ìƒ ë™ì‘ (6ë‹¨ê³„ ê²€ìˆ˜)
- [ ] **AI ìë™ ìˆ˜ì • ê¸°ëŠ¥ ë™ì‘ í™•ì¸** (v2.0)
- [ ] ì„¤ì • íŒŒì¼ ì½ê¸°/ì“°ê¸° ì •ìƒ
- [ ] ë¡œê·¸ íŒŒì¼ ìƒì„± ì •ìƒ

---

## ğŸ”§ ì¶”ê°€ ìµœì í™” ì˜µì…˜

### 1. íŒŒì¼ í¬ê¸° ìµœì í™”

```xml
<PropertyGroup>
  <PublishTrimmed>true</PublishTrimmed>
  <TrimMode>link</TrimMode>
</PropertyGroup>
```

**ì£¼ì˜**: Trimmed ë¹Œë“œëŠ” ì¼ë¶€ ë¦¬í”Œë ‰ì…˜ ê¸°ë°˜ ì½”ë“œì—ì„œ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥

### 2. ReadyToRun ì»´íŒŒì¼

```xml
<PropertyGroup>
  <PublishReadyToRun>true</PublishReadyToRun>
</PropertyGroup>
```

- ì‹œì‘ ì‹œê°„ ë‹¨ì¶•
- íŒŒì¼ í¬ê¸° ì•½ê°„ ì¦ê°€

### 3. ì½”ë“œ ì„œëª…

- Authenticode ì„œëª… ì¶”ê°€ ê¶Œì¥
- Windows Defender ê²½ê³  ë°©ì§€

---

## ğŸ“ ì§€ì›

ë°°í¬ ê´€ë ¨ ë¬¸ì œ ë°œìƒ ì‹œ:

1. ë¡œê·¸ íŒŒì¼ í™•ì¸ (`application_*.log`)
2. ì˜ì¡´ì„± í™•ì¸ (Dependency Walker ë“±)
3. ì´ë²¤íŠ¸ ë·°ì–´ í™•ì¸ (Windows ë¡œê·¸)


