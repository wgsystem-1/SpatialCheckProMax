# 지오메트리 오류 수정 매뉴얼

## 개요

본 매뉴얼은 국가기본도 FileGDB 검수 시스템에서 검출되는 지오메트리 오류를 ArcGIS Pro와 QGIS에서 수정하는 방법을 안내합니다.

### 검출되는 지오메트리 오류 유형 (총 13가지)

#### 구체적 오류 유형 (12가지)

1. **객체중복** - 동일한 위치에 중복된 객체
2. **객체간겹침** - 객체 간 면적이 겹치는 경우
3. **자체꼬임** - 객체가 자기 자신과 교차하는 경우
4. **슬리버** - 매우 좁고 긴 폴리곤
5. **짧은객체** - 최소 길이 미만의 선형 객체
6. **작은면적객체** - 최소 면적 미만의 폴리곤
7. **홀 폴리곤 오류** - 폴리곤 내부 홀의 구조적 오류
8. **최소정점개수** - 최소 정점 개수 미만
9. **스파이크** - 날카로운 돌출부
10. **자기중첩** - 폴리곤이 자기 자신과 중첩되는 경우
11. **언더슛** - 선형 객체의 끝점이 목표 지점에 도달하지 못한 경우
12. **오버슛** - 선형 객체의 끝점이 목표 지점을 넘어선 경우

#### 기본검수 (1가지)

**기본검수 (지오메트리 유효성 검사)** - GEOS IsValid() 검사를 통한 종합적 지오메트리 유효성 검사
  
- 자체꼬임, 자기중첩, 링 방향 오류, 홀-쉘 관계 오류 등을 종합적으로 검사
- OGC Simple Features 표준 준수 여부 확인
- 구체적 오류 유형으로 분류되지 않는 구조적 오류 검출

---

## ArcGIS Pro에서 지오메트리 오류 수정

### 1. 자동 수정 방법

#### 1.1 지오메트리 수정 도구 (Repair Geometry)

**적용 가능한 오류** : 기본검수(지오메트리 유효성 검사), 자체꼬임, 자기중첩, 홀 폴리곤 오류, 링 방향 오류

**절차** :

1. **카탈로그 창**에서 수정할 피처클래스 우클릭
2. **관리** → **지오메트리 수정** 선택
3. 수정 옵션 확인 :
   - ✅ **자기 교차 제거** (Remove self-intersections)
   - ✅ **중복 정점 제거** (Remove duplicate vertices)
   - ✅ **링 방향 수정** (Fix ring orientation)
   - ✅ **홀-쉘 관계 수정** (Fix hole-shell relationship)
4. **실행** 클릭

**주의사항** :

- 수정 전 백업 필수
- 대용량 데이터는 시간이 오래 걸릴 수 있음
- 수정 후 검수 재실행으로 결과 확인

#### 1.2 중복 제거 도구 (Delete Identical)

**적용 가능한 오류** : 객체중복

**절차** :

1. 피처클래스 선택
2. **데이터** 탭 → **도구** → **중복 제거** (Delete Identical)
3. 중복 판단 기준 필드 선택 (일반적으로 `OBJECTID` 또는 `NF_ID`)
4. **실행** 클릭

**대안** : **중복 찾기** (Find Identical)로 먼저 확인 후 수동 삭제

#### 1.3 버퍼 및 다이스 도구 (Buffer & Dice)

**적용 가능한 오류** : 슬리버, 작은면적객체

**절차** :

1. **분석** 탭 → **도구** → **버퍼** 실행
2. 버퍼 거리 : 0.001m (매우 작은 값)
3. 결과를 원본과 **다이스** (Dice) 또는 **교차** (Intersect)하여 작은 객체 제거

**주의사항** : 면적이 작은 객체는 삭제하는 것이 더 효율적일 수 있음

---

### 2. 반자동 수정 방법

#### 2.1 토폴로지 편집 (Topology Editing)

**적용 가능한 오류** : 객체간겹침, 언더슛, 오버슛

**절차** :

1. **카탈로그**에서 데이터베이스 우클릭 → **신규** → **토폴로지**
2. 토폴로지 규칙 설정 :
   - **Must Not Overlap** (겹침 금지)
   - **Must Not Have Gaps** (간격 금지)
   - **Must Not Have Dangles** (끝점 연결)
3. **지도**에 토폴로지  피처클래스 추가
4. **토폴로지** 탭 → **오류 검사기** 활성화
5. 오류 위치로 이동하여 **수정** 도구로 자동/수동 수정

**토폴로지 규칙 예시** :

```text
- Must Not Overlap (Must Not Overlap Area)
- Must Not Have Gaps (Must Not Have Gaps Area)
- Must Be Covered By Feature Class Of (Must Be Covered By Line)
- Endpoint Must Be Covered By (Must Not Have Dangles)
```

#### 2.2 스냅 환경 설정 (Snapping Environment)

**적용 가능한 오류** : 언더슛, 오버슛

**절차** :

1. **편집** 탭 → **스냅** 클릭
2. 스냅 옵션 활성화 :
   - ✅ **끝점 스냅** (End Snapping)
   - ✅ **정점 스냅** (Vertex Snapping)
   - ✅ **가장자리 스냅** (Edge Snapping)
3. 스냅 거리 설정 : 1m (검수 기준과 동일)
4. **편집** 모드 진입
5. 오류 위치로 이동하여 끝점을 스냅하여 연결

#### 2.3 일반화 도구 (Generalize)

**적용 가능한 오류** : 스파이크, 최소정점개수

**절차** :

1. 피처 선택
2. **편집** 탭 → **일반화** (Generalize)
3. 허용 오차 설정 : 0.1m ~ 1.0m
4. **실행** 클릭

**대안** : **스무스** (Smooth) 도구로 곡선 부드럽게 만들기

---

### 3. 수동 수정 방법

#### 3.1 편집 모드에서 직접 수정

**적용 가능한 오류** : 모든 오류 유형

**절차** :

1. **편집** 탭 → **편집** 클릭
2. 오류 객체 선택
3. **수정 피처** (Modify Features) 도구 선택
4. 정점 편집 :
   - 정점 이동 : 정점 클릭 후 드래그
   - 정점 추가 : 선분 우클릭 → **정점 추가**
   - 정점 삭제 : 정점 우클릭 → **정점 삭제**
5. **저장** 클릭

**팁** :

- **확대** (Zoom) 도구로 오류 위치 정확히 확인
- **측정** (Measure) 도구로 거리/면적 확인
- **속성** 창에서 좌표값 직접 입력 가능

#### 3.2 스플릿 및 머지 도구

**적용 가능한 오류** : 객체간겹침, 슬리버

**절차** :

1. 겹치는 객체 선택
2. **편집** 탭 → **분할** (Split) 또는 **병합** (Merge)
3. 겹침 영역 제거 :
   - **분할** 후 겹침 부분 삭제
   - 또는 **차집합** (Erase) 도구 사용

#### 3.3 좌표 직접 입력

**적용 가능한 오류** : 언더슛, 오버슛, 정점 위치 오류

**절차** :

1. 편집 모드 진입
2. 오류 정점 선택
3. **속성** 창에서 X, Y 좌표 직접 입력
4. **저장** 클릭

---

## QGIS에서 지오메트리 오류 수정

### 자동 수정 방법

#### 1.1 지오메트리 검증 도구 (Check Geometry Validity)

**적용 가능한 오류** : 기본검수(지오메트리 유효성 검사), 자체꼬임, 자기중첩, 홀 폴리곤 오류

**절차** :

1. **벡터** 메뉴 → **지오메트리 도구** → **지오메트리 검증** (Check Geometry Validity)
2. 입력  피처클래스 선택
3. 검증 방법 선택 :
   - **QGIS** (기본)
   - **GEOS** (더 엄격)
4. **실행** 클릭
5. 결과  피처클래스에서 오류 위치 확인
6. **벡터** 메뉴 → **지오메트리 도구** → **지오메트리 수정** (Fix Geometries) 실행

**플러그인 사용** :

- **Check Geometry** 플러그인 설치
- **Processing Toolbox** → **Check Geometry** 실행
- 자동 수정 옵션 활성화

#### 1.2 중복 제거 도구 (Remove Duplicate Geometries)

**적용 가능한 오류** : 객체중복

**절차** :

1. **벡터** 메뉴 → **연구 도구** → **중복 제거** (Remove Duplicate Geometries)
2. 입력  피처클래스 선택
3. 비교 기준 선택 :
   - **지오메트리만** (Geometry only)
   - **지오메트리 + 속성** (Geometry + Attributes)
4. **실행** 클릭

#### 1.3 작은 객체 제거 (Remove Small Objects)

**적용 가능한 오류** : 슬리버, 작은면적객체, 짧은객체

**절차** :

1. **Processing Toolbox** → **벡터 일반** → **작은 객체 제거** (Remove Small Objects)
2. 입력  피처클래스 선택
3. 최소 면적/길이 설정 :
   - 최소 면적 : 0.1㎡
   - 최소 길이 : 1.0m
4. **실행** 클릭

---

### 반자동 수정 방법

#### 2.1 스냅 도구 (Snapping Toolbar)

**적용 가능한 오류** : 언더슛, 오버슛

**절차** :

1. **설정** 메뉴 → **스냅 옵션** (Snapping Options)
2. 스냅 모드 활성화 :
   - ✅ **끝점** (Endpoint)
   - ✅ **정점** (Vertex)
   - ✅ **가장자리** (Edge)
3. 스냅 허용 오차 설정 : 1m
4. **편집 모드** 활성화 (토글 편집)
5. 오류 위치로 이동하여 끝점을 스냅하여 연결

**단축키** : `S` 키로 스냅 온/오프 전환

#### 2.2 토폴로지 검증 (Topology Checker)

**적용 가능한 오류** : 객체간겹침, 간격, 끝점 연결

**절차** :

1. **플러그인** 메뉴 → **플러그인 관리 및 설치**
2. **Topology Checker** 플러그인 설치 및 활성화
3. **벡터** 메뉴 → **Topology Checker** → **현재  피처클래스 규칙 추가**
4. 규칙 설정 :
   - **Must Not Overlap** (겹침 금지)
   - **Must Not Have Gaps** (간격 금지)
   - **Must Not Have Dangles** (끝점 연결)
5. **검증** (Validate) 실행
6. 오류 목록에서 오류 선택 → **수정** 버튼 클릭

#### 2.3 일반화 도구 (Simplify)

**적용 가능한 오류** : 스파이크, 최소정점개수

**절차** :

1. 피처 선택
2. **벡터** 메뉴 → **지오메트리 도구** → **일반화** (Simplify)
3. 허용 오차 설정 : 0.1m ~ 1.0m
4. 알고리즘 선택 :
   - **Douglas-Peucker** (기본)
   - **Visvalingam** (면적 보존)
5. **실행** 클릭

---

### 수동 수정 방법

#### 3.1 노드 도구 (Node Tool)

**적용 가능한 오류** : 모든 오류 유형

**절차** :

1. **편집 모드** 활성화 (토글 편집)
2. **노드 도구** (Node Tool) 선택
3. 오류 객체 클릭하여 정점 표시
4. 정점 편집 :
   - 정점 이동 : 정점 클릭 후 드래그
   - 정점 추가 : 선분 더블클릭
   - 정점 삭제 : 정점 선택 후 `Delete` 키
5. **저장  피처클래스 편집** 클릭

**팁** :

- `Ctrl + 클릭` : 정점 추가
- `Delete` 키 : 정점 삭제
- `Ctrl + Z` : 실행 취소

#### 3.2 분할 및 병합 도구

**적용 가능한 오류** : 객체간겹침, 슬리버

**절차** :

1. 편집 모드 활성화
2. 겹치는 객체 선택
3. **분할** (Split Features) 또는 **병합** (Merge Features) 도구 사용
4. 겹침 영역 제거 :
   - **차집합** (Difference) 도구 사용
   - 또는 수동으로 정점 편집하여 겹침 제거

#### 좌표 직접 입력

**적용 가능한 오류** : 언더슛, 오버슛, 정점 위치 오류

**절차** :

1. 편집 모드 활성화
2. 노드 도구로 오류 정점 선택
3. **속성 테이블**에서 좌표 확인
4. **좌표 캡처 패널** (Coordinate Capture Panel) 활성화
5. 정확한 좌표 입력 후 적용

---

## 오류 유형별 수정 우선순위

### 우선순위 1 : 구조적 오류 (자동 수정 권장)

- ✅ **기본검수(지오메트리 유효성 검사)** → **Repair Geometry** (ArcGIS Pro) / **Fix Geometries** (QGIS)
- ✅ 자체꼬임 → **Repair Geometry** (ArcGIS Pro) / **Fix Geometries** (QGIS)
- ✅ 자기중첩 → **Repair Geometry** (ArcGIS Pro) / **Fix Geometries** (QGIS)
- ✅ 홀 폴리곤 오류 → **Repair Geometry** (ArcGIS Pro) / **Fix Geometries** (QGIS)

### 우선순위 2 : 중복 및 겹침 (반자동 수정 권장)

- ✅ 객체중복 → **Delete Identical** (ArcGIS Pro) / **Remove Duplicate Geometries** (QGIS)
- ✅ 객체간겹침 → **토폴로지 편집** (ArcGIS Pro) / **Topology Checker** (QGIS)

### 우선순위 3 : 연결 오류 (반자동 수정 권장)

- ✅ 언더슛 → **스냅 도구** (ArcGIS Pro/QGIS)
- ✅ 오버슛 → **스냅 도구** (ArcGIS Pro/QGIS)

### 우선순위 4 : 품질 오류 (수동 검토 후 수정)

- ⚠️ 슬리버 → 작은 객체 제거 또는 수동 편집
- ⚠️ 작은면적객체 → 삭제 또는 수동 편집
- ⚠️ 짧은객체 → 삭제 또는 수동 편집
- ⚠️ 스파이크 → 일반화 도구 또는 수동 편집
- ⚠️ 최소정점개수 → 정점 추가 또는 일반화 도구

---

## 수정 후 검증 절차

### 1. 수정 전 백업

- 원본 FileGDB 복사본 생성
- 수정 전 상태 기록

### 2. 수정 실행

- 자동/반자동/수동 수정 도구 사용
- 수정 내용 기록

### 3. 수정 후 검증

- 검수 시스템으로 재검수 실행
- 오류 개수 감소 확인
- 새로운 오류 발생 여부 확인

### 4. 최종 확인

- 지도에서 시각적 확인
- 속성 테이블에서 데이터 무결성 확인
- 좌표계 및 메타데이터 확인

---

## 주의사항

### 공통 주의사항

1. **백업 필수** : 수정 전 반드시 원본 데이터 백업
2. **좌표계 확인** : 수정 시 좌표계가 변경되지 않도록 주의
3. **속성 보존** : 지오메트리 수정 시 속성값이 유지되는지 확인
4. **검수 재실행** : 수정 후 반드시 검수 시스템으로 재검증

### ArcGIS Pro 특화 주의사항

- **버전 관리** : 버전 관리 데이터베이스 사용 시 버전 충돌 주의
- **편집 세션** : 편집 세션 종료 전 저장 필수
- **토폴로지** : 토폴로지 규칙 위반 시 자동 수정 실패 가능

### QGIS 특화 주의사항

- **플러그인 호환성** : 플러그인 버전과 QGIS 버전 호환성 확인
- **메모리 사용량** : 대용량 데이터 처리 시 메모리 부족 주의
- **좌표계 변환** : 좌표계가 자동 변환되지 않도록 주의

---

## 참고 자료

### ArcGIS Pro 도움말

- [지오메트리 수정 도구](https ://pro.arcgis.com/ko/pro-app/latest/help/data/geodatabases/overview/repairing-geometry.htm)
- [토폴로지 편집](https ://pro.arcgis.com/ko/pro-app/latest/help/data/topologies/editing-features-using-topology.htm)
- [스냅 환경](https ://pro.arcgis.com/ko/pro-app/latest/help/edit/features/snapping.htm)

### QGIS 문서

- [지오메트리 검증](https ://docs.qgis.org/latest/ko/docs/user_manual/processing_algs/qgis/vectorgeometry.html)
- [Topology Checker 플러그인](https ://plugins.qgis.org/plugins/topologychecker/)
- [스냅 옵션](https ://docs.qgis.org/latest/ko/docs/user_manual/working_with_vector/editing_geometry_attributes.html#snapping-toolbar)

---

## 부록 : 오류 코드별 수정 방법 요약 (총 13가지)

| 오류 유형 | ArcGIS Pro 자동 | ArcGIS Pro 반자동 | ArcGIS Pro 수동 | QGIS 자동 | QGIS 반자동 | QGIS 수동 |
|---------|--------------|----------------|--------------|---------|-----------|---------|
| 기본검수(지오메트리 유효성 검사) | Repair Geometry | - | 노드 도구 | Fix Geometries | - | 노드 도구 |
| 객체중복 | Delete Identical | Find Identical | 속성 테이블에서 삭제 | Remove Duplicate Geometries | 중복 찾기 | 속성 테이블에서 삭제 |
| 객체간겹침 | - | 토폴로지 편집 | 분할/병합 도구 | - | Topology Checker | 차집합 도구 |
| 자체꼬임 | Repair Geometry | - | 노드 도구 | Fix Geometries | - | 노드 도구 |
| 슬리버 | 버퍼+다이스 | - | 수동 삭제 | Remove Small Objects | - | 수동 삭제 |
| 작은면적객체 | 버퍼+다이스 | - | 수동 삭제 | Remove Small Objects | - | 수동 삭제 |
| 홀 폴리곤 오류 | Repair Geometry | - | 노드 도구 | Fix Geometries | - | 노드 도구 |
| 최소정점개수 | - | 일반화 도구 | 정점 추가 | - | Simplify | 정점 추가 |
| 스파이크 | - | 일반화 도구 | 노드 도구 | - | Simplify | 노드 도구 |
| 자기중첩 | Repair Geometry | - | 노드 도구 | Fix Geometries | - | 노드 도구 |
| 언더슛 | - | 스냅 도구 | 노드 도구 | - | 스냅 도구 | 노드 도구 |
| 오버슛 | - | 스냅 도구 | 노드 도구 | - | 스냅 도구 | 노드 도구 |

---

**작성일** : 2025-11-17  
**버전** : 1.0  
**작성자** : SpatialCheckProMax 개발팀

